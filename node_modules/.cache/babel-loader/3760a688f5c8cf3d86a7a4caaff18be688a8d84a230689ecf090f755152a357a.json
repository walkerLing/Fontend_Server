{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"MyContent\",\n  data() {\n    return {\n      server_url: \"http://127.0.0.1:5003\",\n      activeName: \"first\",\n      active: 0,\n      centerDialogVisible: true,\n      url_1: \"\",\n      url_2: \"\",\n      textarea: \"\",\n      srcList: [],\n      srcList1: [],\n      feature_list: [],\n      feature_list_1: [],\n      feat_list: [],\n      url: \"\",\n      visible: false,\n      wait_return: \"等待上传\",\n      wait_upload: \"等待上传\",\n      loading: false,\n      table: false,\n      isNav: false,\n      showbutton: true,\n      percentage: 0,\n      fullscreenLoading: false,\n      opacitys: {\n        opacity: 0\n      },\n      dialogTableVisible: false\n    };\n  },\n  created: function () {\n    document.title = \"MatDet·WEB端\";\n  },\n  methods: {\n    true_upload() {\n      this.$refs.upload.click();\n    },\n    true_upload2() {\n      this.$refs.upload2.click();\n    },\n    next() {\n      this.active++;\n    },\n    // 获得目标文件\n    getObjectURL(file) {\n      var url = null;\n      if (window.createObjcectURL != undefined) {\n        url = window.createOjcectURL(file);\n      } else if (window.URL != undefined) {\n        url = window.URL.createObjectURL(file);\n      } else if (window.webkitURL != undefined) {\n        url = window.webkitURL.createObjectURL(file);\n      }\n      return url;\n    },\n    // 上传文件\n    update(e) {\n      this.percentage = 0;\n      this.dialogTableVisible = true;\n      this.url_1 = \"\";\n      this.url_2 = \"\";\n      this.srcList = [];\n      this.srcList1 = [];\n      this.wait_return = \"\";\n      this.wait_upload = \"\";\n      this.feature_list = [];\n      this.feat_list = [];\n      this.fullscreenLoading = true;\n      this.loading = true;\n      this.showbutton = false;\n      let file = e.target.files[0];\n      this.url_1 = this.$options.methods.getObjectURL(file);\n      let param = new FormData(); //创建form对象\n      param.append(\"file\", file, file.name); //通过append向form对象添加数据\n      var timer = setInterval(() => {\n        this.myFunc();\n      }, 30);\n      let config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }; //添加请求头\n      axios.post(this.server_url + \"/upload\", param, config).then(response => {\n        this.percentage = 100;\n        clearInterval(timer);\n        this.url_1 = response.data.image_url;\n        this.srcList.push(this.url_1);\n        this.url_2 = response.data.draw_url;\n        this.srcList1.push(this.url_2);\n        this.fullscreenLoading = false;\n        this.loading = false;\n        this.feat_list = Object.keys(response.data.image_info);\n        for (var i = 0; i < this.feat_list.length; i++) {\n          response.data.image_info[this.feat_list[i]][2] = this.feat_list[i];\n          this.feature_list.push(response.data.image_info[this.feat_list[i]]);\n        }\n        this.feature_list.push(response.data.image_info);\n        this.feature_list_1 = this.feature_list[0];\n        this.dialogTableVisible = false;\n        this.percentage = 0;\n        this.notice1();\n      });\n    },\n    myFunc() {\n      if (this.percentage + 33 < 99) {\n        this.percentage = this.percentage + 33;\n      } else {\n        this.percentage = 99;\n      }\n    },\n    drawChart() {},\n    notice1() {\n      this.$notify({\n        title: \"预测成功\",\n        message: \"点击图片可以查看大图\",\n        duration: 0,\n        type: \"success\"\n      });\n    }\n  },\n  mounted() {\n    this.drawChart();\n  }\n};","map":{"version":3,"mappings":";AAqJA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;QACAnB;MACA;QACAA;MACA;QACAA;MACA;MACA;IACA;IACA;IACAoB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC;MACA;QACA;MACA;MACA;QACAC;UAAA;QAAA;MACA;MACAC,MACAC,iDACAC;QACA;QACAC;QACA;QACA;QACA;QACA;QACA;QACA;QAEA;QAEA;UACAC;UACA;QACA;QAEA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;IACAC;MACA;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA;EACA;AACA","names":["name","data","server_url","activeName","active","centerDialogVisible","url_1","url_2","textarea","srcList","srcList1","feature_list","feature_list_1","feat_list","url","visible","wait_return","wait_upload","loading","table","isNav","showbutton","percentage","fullscreenLoading","opacitys","opacity","dialogTableVisible","created","document","methods","true_upload","true_upload2","next","getObjectURL","update","param","headers","axios","post","then","clearInterval","response","myFunc","drawChart","notice1","title","message","duration","type","mounted"],"sourceRoot":"src/components","sources":["MyContent.vue"],"sourcesContent":["<template>\r\n  <div id=\"Content\">\r\n    <el-dialog\r\n      title=\"AI预测中\"\r\n      :visible.sync=\"dialogTableVisible\"\r\n      :show-close=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :append-to-body=\"true\"\r\n      :close-on-click-modal=\"false\"\r\n      :center=\"true\"\r\n    >\r\n      <el-progress :percentage=\"percentage\"></el-progress>\r\n      <span slot=\"footer\" class=\"dialog-footer\">请耐心等待约3秒钟</span>\r\n    </el-dialog>\r\n\r\n    <div id=\"CT\">\r\n      <div id=\"CT_image\">\r\n        <el-card\r\n          id=\"CT_image_1\"\r\n          class=\"box-card\"\r\n          style=\"\r\n            border-radius: 8px;\r\n            width: 800px;\r\n            height: 360px;\r\n            margin-bottom: -30px;\r\n          \"\r\n        >\r\n          <div class=\"demo-image__preview1\">\r\n            <div\r\n              v-loading=\"loading\"\r\n              element-loading-text=\"上传图片中\"\r\n              element-loading-spinner=\"el-icon-loading\"\r\n            >\r\n              <el-image\r\n                :src=\"url_1\"\r\n                class=\"image_1\"\r\n                :preview-src-list=\"srcList\"\r\n                style=\"border-radius: 3px 3px 0 0\"\r\n              >\r\n                <div slot=\"error\">\r\n                  <div slot=\"placeholder\" class=\"error\">\r\n                    <el-button\r\n                      v-show=\"showbutton\"\r\n                      type=\"primary\"\r\n                      icon=\"el-icon-upload\"\r\n                      class=\"download_bt\"\r\n                      v-on:click=\"true_upload\"\r\n                    >\r\n                      上传图像\r\n                      <input\r\n                        ref=\"upload\"\r\n                        style=\"display: none\"\r\n                        name=\"file\"\r\n                        type=\"file\"\r\n                        @change=\"update\"\r\n                      />\r\n                    </el-button>\r\n                  </div>\r\n                </div>\r\n              </el-image>\r\n            </div>\r\n            <div class=\"img_info_1\" style=\"border-radius: 0 0 5px 5px\">\r\n              <span style=\"color: white; letter-spacing: 6px\">原始图像</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"demo-image__preview2\">\r\n            <div\r\n              v-loading=\"loading\"\r\n              element-loading-text=\"处理中,请耐心等待\"\r\n              element-loading-spinner=\"el-icon-loading\"\r\n            >\r\n              <el-image\r\n                :src=\"url_2\"\r\n                class=\"image_1\"\r\n                :preview-src-list=\"srcList1\"\r\n                style=\"border-radius: 3px 3px 0 0\"\r\n              >\r\n                <div slot=\"error\">\r\n                  <div slot=\"placeholder\" class=\"error\">{{ wait_return }}</div>\r\n                </div>\r\n              </el-image>\r\n            </div>\r\n            <div class=\"img_info_1\" style=\"border-radius: 0 0 5px 5px\">\r\n              <span style=\"color: white; letter-spacing: 4px\">检测结果</span>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n      <div id=\"info_patient\">\r\n        <!-- 卡片放置表格 -->\r\n        <el-card style=\"border-radius: 8px\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>检测目标</span>\r\n            <el-button\r\n              style=\"margin-left: 35px\"\r\n              v-show=\"!showbutton\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-upload\"\r\n              class=\"download_bt\"\r\n              v-on:click=\"true_upload2\"\r\n            >\r\n              重新选择图像\r\n              <input\r\n                ref=\"upload2\"\r\n                style=\"display: none\"\r\n                name=\"file\"\r\n                type=\"file\"\r\n                @change=\"update\"\r\n              />\r\n            </el-button>\r\n          </div>\r\n          <el-tabs v-model=\"activeName\">\r\n            <el-tab-pane label=\"检测到的目标\" name=\"first\">\r\n              <!-- 表格存放特征值 -->\r\n              <el-table\r\n                :data=\"feature_list\"\r\n                height=\"390\"\r\n                border\r\n                style=\"width: 750px; text-align: center\"\r\n                v-loading=\"loading\"\r\n                element-loading-text=\"数据正在处理中，请耐心等待\"\r\n                element-loading-spinner=\"el-icon-loading\"\r\n                lazy\r\n              >\r\n                <el-table-column label=\"目标类别\" width=\"250px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span>{{ scope.row[2] }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"目标大小\" width=\"250px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span>{{ scope.row[0] }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"置信度\" width=\"250px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span>{{ scope.row[1] }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"MyContent\",\r\n  data() {\r\n    return {\r\n      server_url: \"http://127.0.0.1:5003\",\r\n      activeName: \"first\",\r\n      active: 0,\r\n      centerDialogVisible: true,\r\n      url_1: \"\",\r\n      url_2: \"\",\r\n      textarea: \"\",\r\n      srcList: [],\r\n      srcList1: [],\r\n      feature_list: [],\r\n      feature_list_1: [],\r\n      feat_list: [],\r\n      url: \"\",\r\n      visible: false,\r\n      wait_return: \"等待上传\",\r\n      wait_upload: \"等待上传\",\r\n      loading: false,\r\n      table: false,\r\n      isNav: false,\r\n      showbutton: true,\r\n      percentage: 0,\r\n      fullscreenLoading: false,\r\n      opacitys: {\r\n        opacity: 0,\r\n      },\r\n      dialogTableVisible: false,\r\n    };\r\n  },\r\n  created: function () {\r\n    document.title = \"MatDet·WEB端\";\r\n  },\r\n  methods: {\r\n    true_upload() {\r\n      this.$refs.upload.click();\r\n    },\r\n    true_upload2() {\r\n      this.$refs.upload2.click();\r\n    },\r\n    next() {\r\n      this.active++;\r\n    },\r\n    // 获得目标文件\r\n    getObjectURL(file) {\r\n      var url = null;\r\n      if (window.createObjcectURL != undefined) {\r\n        url = window.createOjcectURL(file);\r\n      } else if (window.URL != undefined) {\r\n        url = window.URL.createObjectURL(file);\r\n      } else if (window.webkitURL != undefined) {\r\n        url = window.webkitURL.createObjectURL(file);\r\n      }\r\n      return url;\r\n    },\r\n    // 上传文件\r\n    update(e) {\r\n      this.percentage = 0;\r\n      this.dialogTableVisible = true;\r\n      this.url_1 = \"\";\r\n      this.url_2 = \"\";\r\n      this.srcList = [];\r\n      this.srcList1 = [];\r\n      this.wait_return = \"\";\r\n      this.wait_upload = \"\";\r\n      this.feature_list = [];\r\n      this.feat_list = [];\r\n      this.fullscreenLoading = true;\r\n      this.loading = true;\r\n      this.showbutton = false;\r\n      let file = e.target.files[0];\r\n      this.url_1 = this.$options.methods.getObjectURL(file);\r\n      let param = new FormData(); //创建form对象\r\n      param.append(\"file\", file, file.name); //通过append向form对象添加数据\r\n      var timer = setInterval(() => {\r\n        this.myFunc();\r\n      }, 30);\r\n      let config = {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      }; //添加请求头\r\n      axios\r\n        .post(this.server_url + \"/upload\", param, config)\r\n        .then((response) => {\r\n          this.percentage = 100;\r\n          clearInterval(timer);\r\n          this.url_1 = response.data.image_url;\r\n          this.srcList.push(this.url_1);\r\n          this.url_2 = response.data.draw_url;\r\n          this.srcList1.push(this.url_2);\r\n          this.fullscreenLoading = false;\r\n          this.loading = false;\r\n\r\n          this.feat_list = Object.keys(response.data.image_info);\r\n\r\n          for (var i = 0; i < this.feat_list.length; i++) {\r\n            response.data.image_info[this.feat_list[i]][2] = this.feat_list[i];\r\n            this.feature_list.push(response.data.image_info[this.feat_list[i]]);\r\n          }\r\n\r\n          this.feature_list.push(response.data.image_info);\r\n          this.feature_list_1 = this.feature_list[0];\r\n          this.dialogTableVisible = false;\r\n          this.percentage = 0;\r\n          this.notice1();\r\n        });\r\n    },\r\n    myFunc() {\r\n      if (this.percentage + 33 < 99) {\r\n        this.percentage = this.percentage + 33;\r\n      } else {\r\n        this.percentage = 99;\r\n      }\r\n    },\r\n    drawChart() {},\r\n    notice1() {\r\n      this.$notify({\r\n        title: \"预测成功\",\r\n        message: \"点击图片可以查看大图\",\r\n        duration: 0,\r\n        type: \"success\",\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.drawChart();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-button {\r\n  padding: 12px 20px !important;\r\n}\r\n\r\n#hello p {\r\n  font-size: 15px !important;\r\n  /*line-height: 25px;*/\r\n}\r\n\r\n.n1 .el-step__description {\r\n  padding-right: 20%;\r\n  font-size: 14px;\r\n  line-height: 20px;\r\n  /* font-weight: 400; */\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n#Content{\r\n  overflow-y:scroll;\r\n}\r\n.dialog_info {\r\n  margin: 20px auto;\r\n}\r\n\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.box-card {\r\n  width: 680px;\r\n  height: 200px;\r\n  border-radius: 8px;\r\n  margin-top: -20px;\r\n}\r\n\r\n.divider {\r\n  width: 50%;\r\n}\r\n\r\n#CT {\r\n  display: flex;\r\n  height: 100%;\r\n  width: 100%;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin: 0 auto;\r\n  margin-right: 0px;\r\n  max-width: 1800px;\r\n}\r\n\r\n#CT_image_1 {\r\n  width: 90%;\r\n  height: 40%;\r\n  margin: 0px auto;\r\n  padding: 0px auto;\r\n  margin-right: 180px;\r\n  margin-bottom: 0px;\r\n  border-radius: 4px;\r\n}\r\n\r\n#CT_image {\r\n  margin-bottom: 60px;\r\n  margin-left: 30px;\r\n  margin-top: 5px;\r\n}\r\n\r\n.image_1 {\r\n  width: 275px;\r\n  height: 260px;\r\n  background: #ffffff;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.img_info_1 {\r\n  height: 30px;\r\n  width: 275px;\r\n  text-align: center;\r\n  background-color: #21b3b9;\r\n  line-height: 30px;\r\n}\r\n\r\n.demo-image__preview1 {\r\n  width: 250px;\r\n  height: 290px;\r\n  margin: 20px 60px;\r\n  float: left;\r\n}\r\n\r\n.demo-image__preview2 {\r\n  width: 250px;\r\n  height: 290px;\r\n\r\n  margin: 20px 460px;\r\n  /* background-color: green; */\r\n}\r\n\r\n.error {\r\n  margin: 100px auto;\r\n  width: 50%;\r\n  padding: 10px;\r\n  text-align: center;\r\n}\r\n\r\n.block-sidebar {\r\n  position: fixed;\r\n  display: none;\r\n  left: 50%;\r\n  margin-left: 600px;\r\n  top: 350px;\r\n  width: 60px;\r\n  z-index: 99;\r\n}\r\n\r\n.block-sidebar .block-sidebar-item {\r\n  font-size: 50px;\r\n  color: lightblue;\r\n  text-align: center;\r\n  line-height: 50px;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n  display: block;\r\n}\r\n\r\ndiv {\r\n  display: block;\r\n}\r\n\r\n.block-sidebar .block-sidebar-item:hover {\r\n  color: #187aab;\r\n}\r\n\r\n.download_bt {\r\n  padding: 10px 16px !important;\r\n}\r\n\r\n#upfile {\r\n  width: 104px;\r\n  height: 45px;\r\n  background-color: #187aab;\r\n  color: #fff;\r\n  text-align: center;\r\n  line-height: 45px;\r\n  border-radius: 3px;\r\n  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\r\n  color: #fff;\r\n  font-family: \"Source Sans Pro\", Verdana, sans-serif;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.file {\r\n  width: 200px;\r\n  height: 130px;\r\n  position: absolute;\r\n  left: -20px;\r\n  top: 0;\r\n  z-index: 1;\r\n  -moz-opacity: 0;\r\n  -ms-opacity: 0;\r\n  -webkit-opacity: 0;\r\n  opacity: 0; /*css属性&mdash;&mdash;opcity不透明度，取值0-1*/\r\n  filter: alpha(opacity=0);\r\n  cursor: pointer;\r\n}\r\n\r\n#upload {\r\n  position: relative;\r\n  margin: 0px 0px;\r\n}\r\n\r\n#Content {\r\n  width: 100%;\r\n  height: 800px;\r\n  background-image:radial-gradient(circle farthest-side at 10% 90%, #ebe8ff, #EDF3FF 70%, #EDF2FB);\r\n  display: flex;\r\n  margin-left: 9%;\r\n}\r\n\r\n.divider {\r\n  background-color: #eaeaea !important;\r\n  height: 2px !important;\r\n  width: 100%;\r\n  margin-bottom: 50px;\r\n}\r\n\r\n.divider_1 {\r\n  background-color: #ffffff;\r\n  height: 2px !important;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  margin: 20px auto;\r\n}\r\n\r\n.steps {\r\n  font-family: \"lucida grande\", \"lucida sans unicode\", lucida, helvetica,\r\n    \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif;\r\n  color: #21b3b9;\r\n  text-align: center;\r\n  margin: 15px auto;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.step_1 {\r\n  /*color: #303133 !important;*/\r\n  margin: 20px 26px;\r\n}\r\n\r\n#info_patient {\r\n  margin-top: 10px;\r\n  margin-right: 160px;\r\n}\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}