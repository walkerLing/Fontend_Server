{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'BlockSearch',\n  data() {\n    return {\n      storage: {},\n      url_0: \"\",\n      url_1: [],\n      url_1_num: \"\",\n      activeName: \"\",\n      url: 'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg'\n    };\n  },\n  mounted() {\n    this.$bus.$on(\"getStorage\", storage => {\n      console.log('我是BlockSearch组件，收到数据', storage);\n      this.storage = storage;\n    });\n  },\n  updated() {\n    this.$axios.get(`http://localhost:8080/gateway/fruit/image?key=${this.storage.data.certOfOrigin}`).then(res => {\n      // console.log(\"请求产地证书成功了\",res.request.responseURL)\n      this.url_0 = res.request.responseURL;\n    }, error => {\n      console.log(\"请求产地证书图片失败了\", err.message);\n    });\n    this.url_1_num = this.storage.data.plantDevelopment.images.length;\n    for (var i = 0; i < this.url_1_num; i++) {\n      console.log(\"第\", i);\n      this.$axios.get(`http://localhost:8080/gateway/fruit/queryChaincode?key=${this.storage.data.plantDevelopment.images[i]}`).then(res => {\n        console.log(\"请求原产地实景图片成功了\", this.url_1);\n        this.url_1[i] = res.request.responseURL;\n      }, error => {\n        console.log(\"请求原产地实景图片失败了\", err.message);\n      });\n    }\n    console.log(\"获得的图片数组0\", this.url_1);\n    console.log(\"获得的图片数组1\", this.url_1);\n    console.log(\"获得的图片数组2\", this.url_1);\n  }\n};","map":{"version":3,"mappings":"AAoJA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACA;IACA;EACA;EACAC;IACA,wGACAC;MACA;MACA;IACA,GACAC;MACAH;IACA,EACA;IAGA;IAGA,yCACA;MACAA;MACA,+HACAE;QACAF;QACA;MACA,GACAG;QACAH;MACA,EACA;IACA;IAGAA;IACAA;IACAA;EAGA;AACA","names":["name","data","storage","url_0","url_1","url_1_num","activeName","url","mounted","console","updated","res","error"],"sourceRoot":"src/components","sources":["BlockSearch.vue"],"sourcesContent":["<template>\r\n        <!-- 区块链溯源相关信息可视化展示区域 -->\r\n        <div class=\"visualizationOfBlock\">\r\n            <div id=\"info_patient\">\r\n                <!-- 卡片放置表格 -->\r\n                <el-card style=\"border-radius: 30px;background-color: rgba(20, 177, 212,0.2);width:876px;text-align:center;\">\r\n                  <div slot=\"header\" class=\"clearfix\">\r\n                    <span id=\"fonts\" >相关信息如下</span>\r\n                  </div>\r\n                  <el-tabs v-model=\"activeName\">\r\n\r\n\r\n                     <el-tab-pane label=\"原产地证书\" name=\"first\" id=\"certificate\">\r\n                        <!-- 存放图片证书 -->\r\n                        <div class=\"demo-image\">\r\n                              <el-image\r\n                                style=\"width: 100%; height: 100%\"\r\n                                :src=\"this.url_0\"\r\n                                :preview-src-list=\"srcList\"\r\n                                alt='Loading Failed'\r\n                              />\r\n                                <Transition>\r\n                                    <div style=\"font-family: Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,Arial,sans-serif;font-size:large;margin:5%;color:darkred;\">\r\n                                          产地证书\r\n                                    </div>\r\n                                </Transition>\r\n                          </div>\r\n                    </el-tab-pane>\r\n\r\n\r\n\r\n                    <el-tab-pane label=\"有关信息\" name=\"second\" id=\"information\">\r\n                        <!-- 存放有关信息 -->\r\n                        <Transition>\r\n                            <div style=\"font-family: Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,Arial,sans-serif;\r\n                                        font-size:large;\r\n                                        margin:5%;\r\n                                        color:yellow;\">\r\n                                仓库名称：{{ storage.data.storehouse }}\r\n                            </div>\r\n                        </Transition>\r\n                        <Transition>\r\n                            <div style=\"font-family: Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,Arial,sans-serif;\r\n                                        font-size:large;\r\n                                        margin:5%;\r\n                                        color:yellow;\">\r\n                                区块高度：{{ storage.height }}\r\n                            </div>\r\n                        </Transition>\r\n\r\n                            <Transition>\r\n                            <div style=\"font-family: Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,Arial,sans-serif;\r\n                                        font-size:large;\r\n                                        margin:5%;\r\n                                        color:yellow;\">\r\n                                区块哈希：{{ storage.txId }}\r\n                            </div>\r\n                        </Transition>\r\n                    </el-tab-pane>\r\n\r\n\r\n                    <el-tab-pane label=\"温度（℃）\" name=\"third\" id=\"temperatureList\">\r\n                        <!-- 存放六日的温度 -->\r\n                        <template>\r\n                            <el-table\r\n                              :data=\"storage.data.plantDevelopment.temperatureList\"\r\n                              style=\"width: 100%\">\r\n                              <el-table-column\r\n                                prop=\"data\"\r\n                                label=\"温度（℃）\"\r\n                                width=\"400px\"\r\n                                align=\"center\">\r\n                              </el-table-column>\r\n                              <el-table-column\r\n                                prop=\"time\"\r\n                                label=\"时间\"\r\n                                width=\"400px\"\r\n                                align=\"center\"\r\n                                >\r\n                              </el-table-column>\r\n                            </el-table>\r\n                          </template>\r\n                    </el-tab-pane>\r\n\r\n\r\n                    <el-tab-pane label=\"湿度（%rh）\" name=\"fourth\" id=\"humidityList\">\r\n                          <!-- 存放六日的湿度 -->\r\n                        <template>\r\n                            <el-table\r\n                              :data=\"storage.data.plantDevelopment.humidityList\"\r\n                              style=\"width: 100%\">\r\n                              <el-table-column\r\n                                prop=\"data\"\r\n                                label=\"湿度（%rh）\"\r\n                                width=\"400px\"\r\n                                align=\"center\">\r\n                              </el-table-column>\r\n                              <el-table-column\r\n                                prop=\"time\"\r\n                                label=\"时间\"\r\n                                width=\"400px\"\r\n                                align=\"center\"\r\n                                >\r\n                              </el-table-column>\r\n                            </el-table>\r\n                          </template>\r\n                    </el-tab-pane>\r\n\r\n\r\n                    <el-tab-pane label=\"光照强度（lx）\" name=\"fifth\" id=\"beamList\">\r\n                        <!-- 存放六日的光照强度 -->\r\n                        <template>\r\n                            <el-table\r\n                              :data=\"storage.data.plantDevelopment.beamList\"\r\n                              style=\"width: 100%\">\r\n                              <el-table-column\r\n                                prop=\"data\"\r\n                                label=\"光照强度（lx）\"\r\n                                width=\"400px\"\r\n                                align=\"center\">\r\n                              </el-table-column>\r\n                              <el-table-column\r\n                                prop=\"time\"\r\n                                label=\"时间\"\r\n                                width=\"400px\"\r\n                                align=\"center\"\r\n                                >\r\n                              </el-table-column>\r\n                            </el-table>\r\n                          </template>\r\n                    </el-tab-pane>\r\n\r\n                    <el-tab-pane label=\"原产地图片\" name=\"sixth\" id=\"images\">\r\n                        <!-- 存放原产地图片 -->\r\n                        <div class=\"demo-image\" v-for=\"url in url_1\" :key=\"url\">\r\n                            <el-image\r\n                              style=\"width: 100%; height: 100%\"\r\n                              :src=\"url_1\"/>\r\n                        </div>\r\n                    </el-tab-pane>\r\n\r\n                  </el-tabs>\r\n                </el-card>\r\n              </div>\r\n            </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n    name: 'BlockSearch',\r\n    data() {\r\n        return {\r\n            storage: {},\r\n            url_0:\"\",\r\n            url_1:[],\r\n            url_1_num:\"\",\r\n            activeName: \"\",\r\n            url: 'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\r\n        }\r\n    },\r\n    mounted(){\r\n        this.$bus.$on(\"getStorage\", (storage) => {\r\n            console.log('我是BlockSearch组件，收到数据',storage)\r\n            this.storage = storage\r\n        })\r\n    },\r\n    updated(){\r\n            this.$axios.get(`http://localhost:8080/gateway/fruit/image?key=${this.storage.data.certOfOrigin}`).then(\r\n            res=>{\r\n                // console.log(\"请求产地证书成功了\",res.request.responseURL)\r\n                this.url_0 = res.request.responseURL\r\n            },\r\n            error =>{\r\n                console.log(\"请求产地证书图片失败了\",err.message)\r\n            },\r\n            )\r\n\r\n\r\n            this.url_1_num = this.storage.data.plantDevelopment.images.length;\r\n\r\n\r\n            for(var i = 0;i < this.url_1_num;i++)\r\n            {\r\n                  console.log(\"第\",i)\r\n                  this.$axios.get(`http://localhost:8080/gateway/fruit/queryChaincode?key=${this.storage.data.plantDevelopment.images[i]}`).then(\r\n                  res=>{\r\n                      console.log(\"请求原产地实景图片成功了\",this.url_1)\r\n                      this.url_1[i] = res.request.responseURL\r\n                  },\r\n                  error =>{\r\n                      console.log(\"请求原产地实景图片失败了\",err.message)\r\n                  },\r\n                  )\r\n            }\r\n            \r\n\r\n            console.log(\"获得的图片数组0\",this.url_1)\r\n            console.log(\"获得的图片数组1\",this.url_1)\r\n            console.log(\"获得的图片数组2\",this.url_1)\r\n\r\n            \r\n      },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.demo-image{\r\n    margin: 50px;\r\n}\r\n.visualizationOfBlock{\r\n    flex: 6;\r\n    border-radius: 15px;\r\n    width:985px;\r\n    margin-left: 9%;\r\n}\r\n#info_patient {\r\n    margin-top: 10px;\r\n    margin-right: 160px;\r\n  }\r\n  .image_1 {\r\n    width: 275px;\r\n    height: 300px;\r\n    background: rgba(208, 206, 216, 0.5);\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}